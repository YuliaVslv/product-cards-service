# Микросервис для работы с карточками продуктов в интернет-магазине

RESTful сервис, реализующий команды для создания и редактирования карточек продуктов в интернет-магазине.  
С помощью сервиса мы можем добавлять, редактировать, удалять бренды, категории и товары. Также просматривать список всех товаров или товаров по категориям или брендам.  
Взаимодействие с данным сервисом возможно через HTTP-запросы с телом запроса в формате JSON.  
В качестве ответа на запрос сервис возвращает код ответа HTTP и ответ в формате JSON.  

Для автоматизации сборки проекта используется Apache Maven.  
Информация о карточках товара хранится в базе данных PostgreSQL.  
Данный сервис реализован с помощью фреймворка Spring Boot.  
Для подключения и удобной работы с базой данных используется Spring Boot и Hibernate.  
Для развертывания приложения используется Docker.  

## Запуск
    mvn package
    docker-compose build  
    docker-compose up
  
## Доступные запросы для работы с брендами

### GET /brands
    localhost:7000/brands
Получение списка всех брендов.  

Код ответа: OK (200).  

Ответ:  
Данные всех брендов.

### GET /brands/{brandName}
    localhost:7000/brands/some_brand
Получение списка товаров бренда с указанным именем.  

Коды ответа:   
OK (200) - успех,  
Unprocessable entity (422) - если бренда с указанным именем не существует.

Ответ:  
Успех - данные всех товаров указанного бренда,  
Ошибка - сообщение об ошибке.

### POST /brands
    localhost:7000/brands
    
    Request body:
    {
      "name" : "some_brand"
    }
Добавление бренда с указанным именем. 
Для добавления бренда необходимо указать имя по ключу "name". Имя должно быть уникальным.  

Коды ответа:   
Created (201) - успех,   
Unprocessable entity (422) - если имя не указано, пустое или не уникально.

Ответ:  
Успех - данные добавленного бренда,  
Ошибка - сообщение об ошибке.


### DELETE /brands/{brandName}
    localhost:7000/brands/some_brand
Удаление бренда с указанным именем.  

Коды ответа:  
No content (204) - успех,  
Conflict (409) - в случае возникновения конфликта при выполнении операции удаления (например, попытка удаления бренда, к которому привязаны товары),  
Unprocessable entity (422) - если бренда с указанным именем не существует.  

Ответ:  
Успех - нет ответа,  
Ошибка - сообщение об ошибке.

### PUT /brands/{brandName}
    localhost:7000/brands/some_brand
    
    Request body:
    {
      "name" : "some_brand"
    }
Редактирование метода с указанным именем.  
Доступные поля для изменения: "name".

Коды ответа:  
OK (200) - успех,  
Unprocessable entity (422) - если бренда с указанным в url именем не существует, если в теле запроса новое имя пустое или не уникальное.  

Ответ:  
Успех - данные измененного бренда,  
Ошибка - сообщение об ошибке.
Если ключ "name" в запросе пропущен, то операция считается успешной, изменений внесено не будет.

## Доступные запросы для работы с категориями

Работа с категориями товаров осуществляется по схожим с брендами запросам, но через url /categories.  
Требования к запросам, форматы и коды ответов аналогичны тем, что указаны для брендов.  
Далее перечислены доступные запросы:  

    GET /categories - вывод всех категорий,  
    GET /categories/{categoryName} - вывод всех товаров в категории,
    POST /categories - добавление категории,    
    DELETE /categories/{categoryName} - удаление категории,  
    PUT /categories/{categoryName} - редактирование категории.

## Доступные запросы для работы с товарами

### GET /products
    localhost:7000/products
Получение списка всех товаров.  

Код ответа: OK (200).  

Ответ:  
Данные о всех товарах.  

### GET /products/{id}
    localhost:7000/products/10
Получение данных о товаре с заданным id.  

Коды ответа:  
OK (200) - успех,  
Unpocessable entity (422) - если товара с заданным id не существует.  

Ответ:  
Успех - данные о товаре с указанным id,  
Ошибка - сообщение об ошибке.  

### POST /products
    localhost:7000/products
    
    Request body:
    {
      "name" : "product_name",
      "typeId" : 1,
      "brandId" : 1,
      "price" : 999.99,
      "discount" : 10,
      "amount" : 1000
    }
Добавление товара.  

Поля (все поля обязательны):  
"name" - имя товара (строка),  
"typeId" - id существующей категории (положительное целое число),  
"brandId" - id существующего бренда (положительное целое число),  
"price" - цена товара (неотрицательное число с плавающей запятой),  
"discount" - скидка (целое число в диапазоне от 0 до 100),  
"amount" - количество товара на складе (неотрицательное целое число).  

Коды ответа:  
Created (201) - успех,
Unprocessable entity (422) - если указаны неверные данные (например, несуществующий id или отрицательная цена).  

Ответ:  
Успех - данные добавленного товара,  
Ошибка - сообщение об ошибке.  

# DELETE /products/{id}
    localhost:7000/products/10
Удаление товара с заданным id.

Коды ответа:  
No content (204) - успех,  
Conflict (409) - в случае возникновения конфликта при выполнении операции удаления,  
Unprocessable entity (422) - если товара с указанным id не существует.  

Ответ:  
Успех - нет ответа,  
Ошибка - сообщение об ошибке.

# PUT /products/{id}
    localhost:7000/products/10
    
    Request body:
    {
      "name" : "another one product",
      "price" : 1199.99,
      "amount" : 1500
    }
Редактирование данных товара.

Поля (в запросе указать те поля, в которые необходимо внести изменения):  
"name" - имя товара (строка),  
"typeId" - id существующей категории (положительное целое число),  
"brandId" - id существующего бренда (положительное целое число),  
"price" - цена товара (неотрицательное число с плавающей запятой),  
"discount" - скидка (целое число в диапазоне от 0 до 100),  
"amount" - количество товара на складе (неотрицательное целое число). 

Поля, пропущенные в теле запроса, останутся без изменений.  
 
Коды ответа:  
OK (200) - успех,
Unprocessable entity (422) - если указаны неверные данные (например, несуществующий id бренда или отрицательная цена).  

Ответ:  
Успех - данные измененного товара,  
Ошибка - сообщение об ошибке.  

# GET /products/discounts
    localhost:7000/products/discounts
Получение списка товаров, на которые действует скидка.

Код ответа: OK (200).  

Ответ:  
Данные товаров со скидкой.

# PUT /products/discounts
    localhost:7000/products/discounts
    
    {
        "brandId" : 1,
        "typeId" : 1,
        "discount" : 50
    }
Установление скидки для групп товаров:   
Установление скидки для всех товаров бренда - необходимо указать brandId.   
Установление скидки для всех товаров в категории - необходимо указать typeId.   
Установление скидки для всех товаров бренда в категории - необходимо указать оба поля.
(Если оба поля не указаны, ошибка не произойдет, будет выведено сообщение об изменении 0 товаров).

Поля:  
"brandId" - id бренда, для которого устанавливается скидка,  
"typeId" - id категории, для которой устанавливается скидка,   
"discount" - размер скидки от 0 до 100 (обязательное поле).  

Код ответа:   
OK (200) - успех,   
Unprocessable entity (422) - в случае ошибки(если указаны не существующие id, отсутствует discount или неверное значение для discount).

Ответ:  
Успех - сообщение о количестве измененных товаров,   
Ошибка - сообщение об ошибке.